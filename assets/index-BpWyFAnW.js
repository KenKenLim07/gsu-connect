import{j as l,c as Cr,a as Ar,u as Ss,B as Ir,P as be,b as Nr,d as Rr,e as W,f as tt,V as Es,R as Or,g as $r,h as Lr,i as Dr,S as Mr,T as Ps,k as Ur,C as Cs,l as Fr,I as As,m as Br,n as qr,o as Wr,p as Vr}from"./ui-pJCfKkaT.js";import{e as zr,a as m,b as Hr,u as It,L as ve,f as Jr,O as Kr,g as Gr,h as Xr,i as Yr,j as Qr,k as ie,N as Zr,B as en}from"./vendor-BaLbyoFm.js";import{t as tn,c as sn,a as Nt}from"./utils-DARsLm--.js";import{X as rn,C as nn,a as an,A as on,b as ln,c as cn,d as Ht}from"./icons-BJ9AnK9x.js";import{m as N,A as Rt}from"./animations-Bo_bPxK5.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();var qe={},Jt;function un(){if(Jt)return qe;Jt=1;var r=zr();return qe.createRoot=r.createRoot,qe.hydrateRoot=r.hydrateRoot,qe}var dn=un();const Kt={async login(r){return new Promise((e,t)=>{setTimeout(()=>{r.email==="admin@gsu.edu"&&r.password==="admin"?e({id:"1",name:"Admin",email:r.email,role:"admin"}):t(new Error("Invalid credentials"))},1e3)})},async logout(){return new Promise(r=>{setTimeout(()=>{r()},500)})},getToken(){return localStorage.getItem("token")}},hn=m.createContext(void 0);function fn({children:r}){const[e,t]=m.useState(null),[s,n]=m.useState(!1),[i,a]=m.useState(null),o=m.useCallback(async u=>{try{n(!0),a(null);const d=await Kt.login(u);t(d)}catch(d){throw a(d instanceof Error?d.message:"An error occurred"),d}finally{n(!1)}},[]),c=m.useCallback(async()=>{await Kt.logout(),t(null)},[]);return l.jsx(hn.Provider,{value:{user:e,isLoading:s,error:i,login:o,logout:c},children:r})}var Ot="ToastProvider",[$t,mn,pn]=Ar("Toast"),[Is,Al]=Cr("Toast",[pn]),[gn,nt]=Is(Ot),Ns=r=>{const{__scopeToast:e,label:t="Notification",duration:s=5e3,swipeDirection:n="right",swipeThreshold:i=50,children:a}=r,[o,c]=m.useState(null),[u,d]=m.useState(0),h=m.useRef(!1),f=m.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${Ot}\`. Expected non-empty \`string\`.`),l.jsx($t.Provider,{scope:e,children:l.jsx(gn,{scope:e,label:t,duration:s,swipeDirection:n,swipeThreshold:i,toastCount:u,viewport:o,onViewportChange:c,onToastAdd:m.useCallback(()=>d(p=>p+1),[]),onToastRemove:m.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:a})})};Ns.displayName=Ot;var Rs="ToastViewport",vn=["F8"],wt="toast.viewportPause",yt="toast.viewportResume",Os=m.forwardRef((r,e)=>{const{__scopeToast:t,hotkey:s=vn,label:n="Notifications ({hotkey})",...i}=r,a=nt(Rs,t),o=mn(t),c=m.useRef(null),u=m.useRef(null),d=m.useRef(null),h=m.useRef(null),f=Ss(e,h,a.onViewportChange),p=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=a.toastCount>0;m.useEffect(()=>{const g=b=>{var y;s.length!==0&&s.every(x=>b[x]||b.code===x)&&((y=h.current)==null||y.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[s]),m.useEffect(()=>{const g=c.current,b=h.current;if(v&&g&&b){const _=()=>{if(!a.isClosePausedRef.current){const j=new CustomEvent(wt);b.dispatchEvent(j),a.isClosePausedRef.current=!0}},y=()=>{if(a.isClosePausedRef.current){const j=new CustomEvent(yt);b.dispatchEvent(j),a.isClosePausedRef.current=!1}},x=j=>{!g.contains(j.relatedTarget)&&y()},T=()=>{g.contains(document.activeElement)||y()};return g.addEventListener("focusin",_),g.addEventListener("focusout",x),g.addEventListener("pointermove",_),g.addEventListener("pointerleave",T),window.addEventListener("blur",_),window.addEventListener("focus",y),()=>{g.removeEventListener("focusin",_),g.removeEventListener("focusout",x),g.removeEventListener("pointermove",_),g.removeEventListener("pointerleave",T),window.removeEventListener("blur",_),window.removeEventListener("focus",y)}}},[v,a.isClosePausedRef]);const w=m.useCallback(({tabbingDirection:g})=>{const _=o().map(y=>{const x=y.ref.current,T=[x,...An(x)];return g==="forwards"?T:T.reverse()});return(g==="forwards"?_.reverse():_).flat()},[o]);return m.useEffect(()=>{const g=h.current;if(g){const b=_=>{var T,j,A;const y=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!y){const J=document.activeElement,P=_.shiftKey;if(_.target===g&&P){(T=u.current)==null||T.focus();return}const R=w({tabbingDirection:P?"backwards":"forwards"}),V=R.findIndex(S=>S===J);ot(R.slice(V+1))?_.preventDefault():P?(j=u.current)==null||j.focus():(A=d.current)==null||A.focus()}};return g.addEventListener("keydown",b),()=>g.removeEventListener("keydown",b)}},[o,w]),l.jsxs(Ir,{ref:c,role:"region","aria-label":n.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&l.jsx(bt,{ref:u,onFocusFromOutsideViewport:()=>{const g=w({tabbingDirection:"forwards"});ot(g)}}),l.jsx($t.Slot,{scope:t,children:l.jsx(be.ol,{tabIndex:-1,...i,ref:f})}),v&&l.jsx(bt,{ref:d,onFocusFromOutsideViewport:()=>{const g=w({tabbingDirection:"backwards"});ot(g)}})]})});Os.displayName=Rs;var $s="ToastFocusProxy",bt=m.forwardRef((r,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:s,...n}=r,i=nt($s,t);return l.jsx(Es,{"aria-hidden":!0,tabIndex:0,...n,ref:e,style:{position:"fixed"},onFocus:a=>{var u;const o=a.relatedTarget;!((u=i.viewport)!=null&&u.contains(o))&&s()}})});bt.displayName=$s;var De="Toast",wn="toast.swipeStart",yn="toast.swipeMove",bn="toast.swipeCancel",_n="toast.swipeEnd",Ls=m.forwardRef((r,e)=>{const{forceMount:t,open:s,defaultOpen:n,onOpenChange:i,...a}=r,[o,c]=Nr({prop:s,defaultProp:n??!0,onChange:i,caller:De});return l.jsx(Rr,{present:t||o,children:l.jsx(kn,{open:o,...a,ref:e,onClose:()=>c(!1),onPause:tt(r.onPause),onResume:tt(r.onResume),onSwipeStart:W(r.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:W(r.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:W(r.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:W(r.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});Ls.displayName=De;var[xn,jn]=Is(De,{onClose(){}}),kn=m.forwardRef((r,e)=>{const{__scopeToast:t,type:s="foreground",duration:n,open:i,onClose:a,onEscapeKeyDown:o,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...v}=r,w=nt(De,t),[g,b]=m.useState(null),_=Ss(e,S=>b(S)),y=m.useRef(null),x=m.useRef(null),T=n||w.duration,j=m.useRef(0),A=m.useRef(T),J=m.useRef(0),{onToastAdd:P,onToastRemove:C}=w,$=tt(()=>{var U;(g==null?void 0:g.contains(document.activeElement))&&((U=w.viewport)==null||U.focus()),a()}),R=m.useCallback(S=>{!S||S===1/0||(window.clearTimeout(J.current),j.current=new Date().getTime(),J.current=window.setTimeout($,S))},[$]);m.useEffect(()=>{const S=w.viewport;if(S){const U=()=>{R(A.current),u==null||u()},K=()=>{const xe=new Date().getTime()-j.current;A.current=A.current-xe,window.clearTimeout(J.current),c==null||c()};return S.addEventListener(wt,K),S.addEventListener(yt,U),()=>{S.removeEventListener(wt,K),S.removeEventListener(yt,U)}}},[w.viewport,T,c,u,R]),m.useEffect(()=>{i&&!w.isClosePausedRef.current&&R(T)},[i,T,w.isClosePausedRef,R]),m.useEffect(()=>(P(),()=>C()),[P,C]);const V=m.useMemo(()=>g?Ws(g):null,[g]);return w.viewport?l.jsxs(l.Fragment,{children:[V&&l.jsx(Tn,{__scopeToast:t,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:V}),l.jsx(xn,{scope:t,onClose:$,children:Hr.createPortal(l.jsx($t.ItemSlot,{scope:t,children:l.jsx(Or,{asChild:!0,onEscapeKeyDown:W(o,()=>{w.isFocusedToastEscapeKeyDownRef.current||$(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(be.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":w.swipeDirection,...v,ref:_,style:{userSelect:"none",touchAction:"none",...r.style},onKeyDown:W(r.onKeyDown,S=>{S.key==="Escape"&&(o==null||o(S.nativeEvent),S.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,$()))}),onPointerDown:W(r.onPointerDown,S=>{S.button===0&&(y.current={x:S.clientX,y:S.clientY})}),onPointerMove:W(r.onPointerMove,S=>{if(!y.current)return;const U=S.clientX-y.current.x,K=S.clientY-y.current.y,xe=!!x.current,je=["left","right"].includes(w.swipeDirection),Fe=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,Er=je?Fe(0,U):0,Pr=je?0:Fe(0,K),at=S.pointerType==="touch"?10:2,Be={x:Er,y:Pr},zt={originalEvent:S,delta:Be};xe?(x.current=Be,We(yn,h,zt,{discrete:!1})):Gt(Be,w.swipeDirection,at)?(x.current=Be,We(wn,d,zt,{discrete:!1}),S.target.setPointerCapture(S.pointerId)):(Math.abs(U)>at||Math.abs(K)>at)&&(y.current=null)}),onPointerUp:W(r.onPointerUp,S=>{const U=x.current,K=S.target;if(K.hasPointerCapture(S.pointerId)&&K.releasePointerCapture(S.pointerId),x.current=null,y.current=null,U){const xe=S.currentTarget,je={originalEvent:S,delta:U};Gt(U,w.swipeDirection,w.swipeThreshold)?We(_n,p,je,{discrete:!0}):We(bn,f,je,{discrete:!0}),xe.addEventListener("click",Fe=>Fe.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),Tn=r=>{const{__scopeToast:e,children:t,...s}=r,n=nt(De,e),[i,a]=m.useState(!1),[o,c]=m.useState(!1);return Pn(()=>a(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),o?null:l.jsx($r,{asChild:!0,children:l.jsx(Es,{...s,children:i&&l.jsxs(l.Fragment,{children:[n.label," ",t]})})})},Sn="ToastTitle",Ds=m.forwardRef((r,e)=>{const{__scopeToast:t,...s}=r;return l.jsx(be.div,{...s,ref:e})});Ds.displayName=Sn;var En="ToastDescription",Ms=m.forwardRef((r,e)=>{const{__scopeToast:t,...s}=r;return l.jsx(be.div,{...s,ref:e})});Ms.displayName=En;var Us="ToastAction",Fs=m.forwardRef((r,e)=>{const{altText:t,...s}=r;return t.trim()?l.jsx(qs,{altText:t,asChild:!0,children:l.jsx(Lt,{...s,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Us}\`. Expected non-empty \`string\`.`),null)});Fs.displayName=Us;var Bs="ToastClose",Lt=m.forwardRef((r,e)=>{const{__scopeToast:t,...s}=r,n=jn(Bs,t);return l.jsx(qs,{asChild:!0,children:l.jsx(be.button,{type:"button",...s,ref:e,onClick:W(r.onClick,n.onClose)})})});Lt.displayName=Bs;var qs=m.forwardRef((r,e)=>{const{__scopeToast:t,altText:s,...n}=r;return l.jsx(be.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...n,ref:e})});function Ws(r){const e=[];return Array.from(r.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),Cn(s)){const n=s.ariaHidden||s.hidden||s.style.display==="none",i=s.dataset.radixToastAnnounceExclude==="";if(!n)if(i){const a=s.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...Ws(s))}}),e}function We(r,e,t,{discrete:s}){const n=t.originalEvent.currentTarget,i=new CustomEvent(r,{bubbles:!0,cancelable:!0,detail:t});e&&n.addEventListener(r,e,{once:!0}),s?Dr(n,i):n.dispatchEvent(i)}var Gt=(r,e,t=0)=>{const s=Math.abs(r.x),n=Math.abs(r.y),i=s>n;return e==="left"||e==="right"?i&&s>t:!i&&n>t};function Pn(r=()=>{}){const e=tt(r);Lr(()=>{let t=0,s=0;return t=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(s)}},[e])}function Cn(r){return r.nodeType===r.ELEMENT_NODE}function An(r){const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const n=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||n?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function ot(r){const e=document.activeElement;return r.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var In=Ns,Vs=Os,zs=Ls,Hs=Ds,Js=Ms,Ks=Fs,Gs=Lt;function O(...r){return tn(sn(r))}const Nn=In,Xs=m.forwardRef(({className:r,...e},t)=>l.jsx(Vs,{ref:t,className:O("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...e}));Xs.displayName=Vs.displayName;const Rn=Nt("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ys=m.forwardRef(({className:r,variant:e,...t},s)=>l.jsx(zs,{ref:s,className:O(Rn({variant:e}),r),...t}));Ys.displayName=zs.displayName;const On=m.forwardRef(({className:r,...e},t)=>l.jsx(Ks,{ref:t,className:O("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r),...e}));On.displayName=Ks.displayName;const Qs=m.forwardRef(({className:r,...e},t)=>l.jsx(Gs,{ref:t,className:O("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":"",...e,children:l.jsx(rn,{className:"h-4 w-4"})}));Qs.displayName=Gs.displayName;const Zs=m.forwardRef(({className:r,...e},t)=>l.jsx(Hs,{ref:t,className:O("text-sm font-semibold",r),...e}));Zs.displayName=Hs.displayName;const er=m.forwardRef(({className:r,...e},t)=>l.jsx(Js,{ref:t,className:O("text-sm opacity-90",r),...e}));er.displayName=Js.displayName;const $n=1,Ln=1e6;let lt=0;function Dn(){return lt=(lt+1)%Number.MAX_VALUE,lt.toString()}const ct=new Map,Xt=r=>{if(ct.has(r))return;const e=setTimeout(()=>{ct.delete(r),Ae({type:"REMOVE_TOAST",toastId:r})},Ln);ct.set(r,e)},Mn=(r,e)=>{switch(e.type){case"ADD_TOAST":return{...r,toasts:[e.toast,...r.toasts].slice(0,$n)};case"UPDATE_TOAST":return{...r,toasts:r.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?Xt(t):r.toasts.forEach(s=>{Xt(s.id)}),{...r,toasts:r.toasts.map(s=>s.id===t||t===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return e.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(t=>t.id!==e.toastId)}}},Qe=[];let Ze={toasts:[]};function Ae(r){Ze=Mn(Ze,r),Qe.forEach(e=>{e(Ze)})}function Un({...r}){const e=Dn(),t=n=>Ae({type:"UPDATE_TOAST",toast:{...n,id:e}}),s=()=>Ae({type:"DISMISS_TOAST",toastId:e});return Ae({type:"ADD_TOAST",toast:{...r,id:e,open:!0,onOpenChange:n=>{n||s()}}}),{id:e,dismiss:s,update:t}}function Dt(){const[r,e]=m.useState(Ze);return m.useEffect(()=>(Qe.push(e),()=>{const t=Qe.indexOf(e);t>-1&&Qe.splice(t,1)}),[r]),{...r,toast:Un,dismiss:t=>Ae({type:"DISMISS_TOAST",toastId:t})}}function Fn(){const{toasts:r}=Dt();return l.jsxs(Nn,{children:[r.map(({id:e,title:t,description:s,action:n,...i})=>l.jsxs(Ys,{...i,children:[l.jsxs("div",{className:"grid gap-1",children:[t&&l.jsx(Zs,{children:t}),s&&l.jsx(er,{children:s})]}),n,l.jsx(Qs,{})]},e)),l.jsx(Xs,{})]})}function Bn({title:r,titleId:e,...t},s){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),r?m.createElement("title",{id:e},r):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const qn=m.forwardRef(Bn);function Wn({title:r,titleId:e,...t},s){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),r?m.createElement("title",{id:e},r):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.633 10.25c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75a.75.75 0 0 1 .75-.75 2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282m0 0h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23H5.904m10.598-9.75H14.25M5.904 18.5c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 0 1-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 9.953 4.167 9.5 5 9.5h1.053c.472 0 .745.556.5.96a8.958 8.958 0 0 0-1.302 4.665c0 1.194.232 2.333.654 3.375Z"}))}const Vn=m.forwardRef(Wn);function zn({title:r,titleId:e,...t},s){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),r?m.createElement("title",{id:e},r):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const Hn=m.forwardRef(zn);function Jn({title:r,titleId:e,...t},s){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),r?m.createElement("title",{id:e},r):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const Kn=m.forwardRef(Jn);function Gn({title:r,titleId:e,...t},s){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),r?m.createElement("title",{id:e},r):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 0 1-2.25 2.25M16.5 7.5V18a2.25 2.25 0 0 0 2.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 0 0 2.25 2.25h13.5M6 7.5h3v3H6v-3Z"}))}const Xn=m.forwardRef(Gn),Yn=()=>{const r=It(),[e,t]=m.useState(!1),[s,n]=m.useState(!1),[i,a]=m.useState(!1),o=m.useCallback(()=>{s||(n(!0),t(d=>!d),setTimeout(()=>n(!1),400))},[s]),c=m.useCallback(()=>{s||(n(!0),t(!1),setTimeout(()=>n(!1),400))},[s]);m.useEffect(()=>{const d=()=>{a(window.scrollY>0)};return window.addEventListener("scroll",d),()=>window.removeEventListener("scroll",d)},[]);const u=[{to:"/",icon:Hn,label:"Home"},{to:"/news",icon:Xn,label:"News"},{to:"/about",icon:Kn,label:"About"},{to:"/login",icon:qn,label:"Login"}];return l.jsxs("nav",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-200 ${i||e?"bg-white shadow-sm":"bg-transparent"}`,children:[l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between h-14",children:[l.jsx("div",{className:"flex",children:l.jsx(ve,{to:"/",className:"flex items-center",children:l.jsx("span",{className:"text-sm font-bold text-gray-900",children:"GSU Connect"})})}),l.jsx("div",{className:"hidden md:flex items-center gap-8",children:u.map(d=>l.jsxs(ve,{to:d.to,className:"flex items-center gap-1.5 text-gray-600 hover:text-gray-900",children:[l.jsx(d.icon,{className:"w-5 h-5"}),l.jsx("span",{children:d.label})]},d.to))}),l.jsx("div",{className:"md:hidden flex items-center",children:l.jsx(N.button,{onClick:o,className:"p-2 rounded-lg text-gray-600 hover:text-gray-900",whileHover:{scale:1.05},whileTap:{scale:.95},children:l.jsxs(N.div,{className:"w-6 h-6 flex flex-col justify-center items-center relative",animate:e?"open":"closed",children:[l.jsx(N.span,{className:"w-6 h-[3px] bg-current block origin-center absolute",variants:{closed:{rotate:0,y:-6},open:{rotate:45,y:0,transition:{duration:.4,ease:[.34,1.56,.64,1]}}}}),l.jsx(N.span,{className:"w-6 h-[3px] bg-current block absolute",variants:{closed:{opacity:1,y:0},open:{opacity:0,transition:{duration:.2,ease:"easeInOut"}}}}),l.jsx(N.span,{className:"w-6 h-[3px] bg-current block origin-center absolute",variants:{closed:{rotate:0,y:6},open:{rotate:-45,y:0,transition:{duration:.4,ease:[.34,1.56,.64,1]}}}})]})})})]})}),l.jsx(Rt,{children:e&&l.jsx(N.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"md:hidden bg-white border-b overflow-hidden",children:l.jsx(N.div,{className:"flex flex-col py-2 px-4 gap-2",initial:"closed",animate:"open",variants:{open:{transition:{staggerChildren:.1,delayChildren:.1}},closed:{transition:{staggerChildren:.05,staggerDirection:-1}}},children:u.map(d=>l.jsx(N.div,{variants:{open:{x:0,opacity:1,transition:{x:{stiffness:1e3,velocity:-100},opacity:{duration:.2}}},closed:{x:-50,opacity:0,transition:{x:{stiffness:1e3},opacity:{duration:.1}}}},children:l.jsxs(ve,{to:d.to,onClick:h=>{h.preventDefault(),c(),setTimeout(()=>{r(d.to)},100)},className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 py-2",children:[l.jsx(d.icon,{className:"w-5 h-5"}),l.jsx("span",{children:d.label})]})},d.to))})})})]})};function Qn(){const r=Jr();return l.jsxs("div",{className:"min-h-screen flex flex-col bg-background",children:[l.jsx(Yn,{}),l.jsx(Rt,{mode:"wait",children:l.jsx(N.main,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"flex-1 px-4 py-7 max-w-7xl mx-auto w-full mt-8",children:l.jsx(Kr,{})},r.pathname)})]})}const Zn=()=>{const r=new URLSearchParams(window.location.search),e=r.get("redirectTo");if(e){r.delete("redirectTo");const t=window.location.pathname+(r.toString()?`?${r.toString()}`:"");window.history.replaceState({},"",t),window.location.href=e}},ei="modulepreload",ti=function(r){return"/gsu-connect/"+r},Yt={},Me=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){let a=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=a(t.map(u=>{if(u=ti(u),u in Yt)return;Yt[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":ei,d||(f.as="script"),f.crossOrigin="",f.href=u,c&&f.setAttribute("nonce",c),document.head.appendChild(f),d)return new Promise((p,v)=>{f.addEventListener("load",p),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return n.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},si=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Me(async()=>{const{default:s}=await Promise.resolve().then(()=>_e);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Mt extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class ri extends Mt{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ni extends Mt{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ii extends Mt{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var _t;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(_t||(_t={}));var ai=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(o,c)}u((s=s.apply(r,e||[])).next())})};class oi{constructor(e,{headers:t={},customFetch:s,region:n=_t.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=si(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return ai(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:a}=t;let o={},{region:c}=t;c||(c=this.region),c&&c!=="any"&&(o["x-region"]=c);let u;a&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=a):typeof a=="string"?(o["Content-Type"]="text/plain",u=a):typeof FormData<"u"&&a instanceof FormData?u=a:(o["Content-Type"]="application/json",u=JSON.stringify(a)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),n),body:u}).catch(v=>{throw new ri(v)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new ni(d);if(!d.ok)throw new ii(d);let f=((s=d.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield d.json():f==="application/octet-stream"?p=yield d.blob():f==="text/event-stream"?p=d:f==="multipart/form-data"?p=yield d.formData():p=yield d.text(),{data:p,error:null}}catch(n){return{data:null,error:n}}})}}var L={},ae={},oe={},le={},ce={},ue={},li=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ye=li();const ci=ye.fetch,tr=ye.fetch.bind(ye),sr=ye.Headers,ui=ye.Request,di=ye.Response,_e=Object.freeze(Object.defineProperty({__proto__:null,Headers:sr,Request:ui,Response:di,default:tr,fetch:ci},Symbol.toStringTag,{value:"Module"})),hi=Gr(_e);var Ve={},Qt;function rr(){if(Qt)return Ve;Qt=1,Object.defineProperty(Ve,"__esModule",{value:!0});class r extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Ve.default=r,Ve}var Zt;function nr(){if(Zt)return ue;Zt=1;var r=ue&&ue.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ue,"__esModule",{value:!0});const e=r(hi),t=r(rr());class s{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=Object.assign({},this.headers),this.headers[i]=a,this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const o=this.fetch;let c=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var d,h,f;let p=null,v=null,w=null,g=u.status,b=u.statusText;if(u.ok){if(this.method!=="HEAD"){const T=await u.text();T===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?v=T:v=JSON.parse(T))}const y=(d=this.headers.Prefer)===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),x=(h=u.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");y&&x&&x.length>1&&(w=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(p={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,w=null,g=406,b="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const y=await u.text();try{p=JSON.parse(y),Array.isArray(p)&&u.status===404&&(v=[],p=null,g=200,b="OK")}catch{u.status===404&&y===""?(g=204,b="No Content"):p={message:y}}if(p&&this.isMaybeSingle&&(!((f=p==null?void 0:p.details)===null||f===void 0)&&f.includes("0 rows"))&&(p=null,g=200,b="OK"),p&&this.shouldThrowOnError)throw new t.default(p)}return{error:p,data:v,count:w,status:g,statusText:b}});return this.shouldThrowOnError||(c=c.catch(u=>{var d,h,f;return{error:{message:`${(d=u==null?void 0:u.name)!==null&&d!==void 0?d:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(h=u==null?void 0:u.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(f=u==null?void 0:u.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),c.then(i,a)}returns(){return this}overrideTypes(){return this}}return ue.default=s,ue}var es;function ir(){if(es)return ce;es=1;var r=ce&&ce.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ce,"__esModule",{value:!0});const e=r(nr());class t extends e.default{select(n){let i=!1;const a=(n??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(n,{ascending:i=!0,nullsFirst:a,foreignTable:o,referencedTable:c=o}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${n}.${i?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:i,referencedTable:a=i}={}){const o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${n}`),this}range(n,i,{foreignTable:a,referencedTable:o=a}={}){const c=typeof o>"u"?"offset":`${o}.offset`,u=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${n}`),this.url.searchParams.set(u,`${i-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:n=!1,verbose:i=!1,settings:a=!1,buffers:o=!1,wal:c=!1,format:u="text"}={}){var d;const h=[n?"analyze":null,i?"verbose":null,a?"settings":null,o?"buffers":null,c?"wal":null].filter(Boolean).join("|"),f=(d=this.headers.Accept)!==null&&d!==void 0?d:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${f}"; options=${h};`,u==="json"?this:this}rollback(){var n;return((n=this.headers.Prefer)!==null&&n!==void 0?n:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return ce.default=t,ce}var ts;function Ut(){if(ts)return le;ts=1;var r=le&&le.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(le,"__esModule",{value:!0});const e=r(ir());class t extends e.default{eq(n,i){return this.url.searchParams.append(n,`eq.${i}`),this}neq(n,i){return this.url.searchParams.append(n,`neq.${i}`),this}gt(n,i){return this.url.searchParams.append(n,`gt.${i}`),this}gte(n,i){return this.url.searchParams.append(n,`gte.${i}`),this}lt(n,i){return this.url.searchParams.append(n,`lt.${i}`),this}lte(n,i){return this.url.searchParams.append(n,`lte.${i}`),this}like(n,i){return this.url.searchParams.append(n,`like.${i}`),this}likeAllOf(n,i){return this.url.searchParams.append(n,`like(all).{${i.join(",")}}`),this}likeAnyOf(n,i){return this.url.searchParams.append(n,`like(any).{${i.join(",")}}`),this}ilike(n,i){return this.url.searchParams.append(n,`ilike.${i}`),this}ilikeAllOf(n,i){return this.url.searchParams.append(n,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(n,i){return this.url.searchParams.append(n,`ilike(any).{${i.join(",")}}`),this}is(n,i){return this.url.searchParams.append(n,`is.${i}`),this}in(n,i){const a=Array.from(new Set(i)).map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(n,`in.(${a})`),this}contains(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cs.{${i.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(i)}`),this}containedBy(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cd.{${i.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(i)}`),this}rangeGt(n,i){return this.url.searchParams.append(n,`sr.${i}`),this}rangeGte(n,i){return this.url.searchParams.append(n,`nxl.${i}`),this}rangeLt(n,i){return this.url.searchParams.append(n,`sl.${i}`),this}rangeLte(n,i){return this.url.searchParams.append(n,`nxr.${i}`),this}rangeAdjacent(n,i){return this.url.searchParams.append(n,`adj.${i}`),this}overlaps(n,i){return typeof i=="string"?this.url.searchParams.append(n,`ov.${i}`):this.url.searchParams.append(n,`ov.{${i.join(",")}}`),this}textSearch(n,i,{config:a,type:o}={}){let c="";o==="plain"?c="pl":o==="phrase"?c="ph":o==="websearch"&&(c="w");const u=a===void 0?"":`(${a})`;return this.url.searchParams.append(n,`${c}fts${u}.${i}`),this}match(n){return Object.entries(n).forEach(([i,a])=>{this.url.searchParams.append(i,`eq.${a}`)}),this}not(n,i,a){return this.url.searchParams.append(n,`not.${i}.${a}`),this}or(n,{foreignTable:i,referencedTable:a=i}={}){const o=a?`${a}.or`:"or";return this.url.searchParams.append(o,`(${n})`),this}filter(n,i,a){return this.url.searchParams.append(n,`${i}.${a}`),this}}return le.default=t,le}var ss;function ar(){if(ss)return oe;ss=1;var r=oe&&oe.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(oe,"__esModule",{value:!0});const e=r(Ut());class t{constructor(n,{headers:i={},schema:a,fetch:o}){this.url=n,this.headers=i,this.schema=a,this.fetch=o}select(n,{head:i=!1,count:a}={}){const o=i?"HEAD":"GET";let c=!1;const u=(n??"*").split("").map(d=>/\s/.test(d)&&!c?"":(d==='"'&&(c=!c),d)).join("");return this.url.searchParams.set("select",u),a&&(this.headers.Prefer=`count=${a}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(n,{count:i,defaultToNull:a=!0}={}){const o="POST",c=[];if(this.headers.Prefer&&c.push(this.headers.Prefer),i&&c.push(`count=${i}`),a||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(n)){const u=n.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}upsert(n,{onConflict:i,ignoreDuplicates:a=!1,count:o,defaultToNull:c=!0}={}){const u="POST",d=[`resolution=${a?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&d.push(this.headers.Prefer),o&&d.push(`count=${o}`),c||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(n)){const h=n.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(h.length>0){const f=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}update(n,{count:i}={}){const a="PATCH",o=[];return this.headers.Prefer&&o.push(this.headers.Prefer),i&&o.push(`count=${i}`),this.headers.Prefer=o.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}delete({count:n}={}){const i="DELETE",a=[];return n&&a.push(`count=${n}`),this.headers.Prefer&&a.unshift(this.headers.Prefer),this.headers.Prefer=a.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return oe.default=t,oe}var ke={},Te={},rs;function fi(){return rs||(rs=1,Object.defineProperty(Te,"__esModule",{value:!0}),Te.version=void 0,Te.version="0.0.0-automated"),Te}var ns;function mi(){if(ns)return ke;ns=1,Object.defineProperty(ke,"__esModule",{value:!0}),ke.DEFAULT_HEADERS=void 0;const r=fi();return ke.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${r.version}`},ke}var is;function pi(){if(is)return ae;is=1;var r=ae&&ae.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ae,"__esModule",{value:!0});const e=r(ar()),t=r(Ut()),s=mi();class n{constructor(a,{headers:o={},schema:c,fetch:u}={}){this.url=a,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),o),this.schemaName=c,this.fetch=u}from(a){const o=new URL(`${this.url}/${a}`);return new e.default(o,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new n(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,o={},{head:c=!1,get:u=!1,count:d}={}){let h;const f=new URL(`${this.url}/rpc/${a}`);let p;c||u?(h=c?"HEAD":"GET",Object.entries(o).filter(([w,g])=>g!==void 0).map(([w,g])=>[w,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([w,g])=>{f.searchParams.append(w,g)})):(h="POST",p=o);const v=Object.assign({},this.headers);return d&&(v.Prefer=`count=${d}`),new t.default({method:h,url:f,headers:v,schema:this.schemaName,body:p,fetch:this.fetch,allowEmpty:!1})}}return ae.default=n,ae}var as;function gi(){if(as)return L;as=1;var r=L&&L.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(L,"__esModule",{value:!0}),L.PostgrestError=L.PostgrestBuilder=L.PostgrestTransformBuilder=L.PostgrestFilterBuilder=L.PostgrestQueryBuilder=L.PostgrestClient=void 0;const e=r(pi());L.PostgrestClient=e.default;const t=r(ar());L.PostgrestQueryBuilder=t.default;const s=r(Ut());L.PostgrestFilterBuilder=s.default;const n=r(ir());L.PostgrestTransformBuilder=n.default;const i=r(nr());L.PostgrestBuilder=i.default;const a=r(rr());return L.PostgrestError=a.default,L.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:n.default,PostgrestBuilder:i.default,PostgrestError:a.default},L}var vi=gi();const wi=Xr(vi),{PostgrestClient:yi,PostgrestQueryBuilder:Il,PostgrestFilterBuilder:Nl,PostgrestTransformBuilder:Rl,PostgrestBuilder:Ol,PostgrestError:$l}=wi;let xt;typeof window>"u"?xt=require("ws"):xt=window.WebSocket;const bi="2.11.10",_i={"X-Client-Info":`realtime-js/${bi}`},xi="1.0.0",or=1e4,ji=1e3;var we;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(we||(we={}));var M;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(M||(M={}));var q;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(q||(q={}));var jt;(function(r){r.websocket="websocket"})(jt||(jt={}));var re;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(re||(re={}));class ki{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=s.decode(e.slice(a,a+n));a=a+n;const c=s.decode(e.slice(a,a+i));a=a+i;const u=JSON.parse(s.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:c,payload:u}}}class lr{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var I;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(I||(I={}));const os=(r,e,t={})=>{var s;const n=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,a)=>(i[a]=Ti(a,r,e,n),i),{})},Ti=(r,e,t,s)=>{const n=e.find(o=>o.name===r),i=n==null?void 0:n.type,a=t[r];return i&&!s.includes(i)?cr(i,a):kt(a)},cr=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Ci(e,t)}switch(r){case I.bool:return Si(e);case I.float4:case I.float8:case I.int2:case I.int4:case I.int8:case I.numeric:case I.oid:return Ei(e);case I.json:case I.jsonb:return Pi(e);case I.timestamp:return Ai(e);case I.abstime:case I.date:case I.daterange:case I.int4range:case I.int8range:case I.money:case I.reltime:case I.text:case I.time:case I.timestamptz:case I.timetz:case I.tsrange:case I.tstzrange:return kt(e);default:return kt(e)}},kt=r=>r,Si=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Ei=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Pi=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Ci=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let i;const a=r.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>cr(e,o))}return r},Ai=r=>typeof r=="string"?r.replace(" ","T"):r,ur=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class ut{constructor(e,t,s={},n=or){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ls;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(ls||(ls={}));class Ie{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ie.syncState(this.state,n,i,a),this.pendingDiffs.forEach(c=>{this.state=Ie.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Ie.syncDiff(this.state,n,i,a),o())}),this.onJoin((n,i,a)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:a})}),this.onLeave((n,i,a)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const i=this.cloneDeep(e),a=this.transformState(t),o={},c={};return this.map(i,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const h=i[u];if(h){const f=d.map(g=>g.presence_ref),p=h.map(g=>g.presence_ref),v=d.filter(g=>p.indexOf(g.presence_ref)<0),w=h.filter(g=>f.indexOf(g.presence_ref)<0);v.length>0&&(o[u]=v),w.length>0&&(c[u]=w)}else o[u]=d}),this.syncDiff(i,{joins:o,leaves:c},s,n)}static syncDiff(e,t,s,n){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(o,c)=>{var u;const d=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(c),d.length>0){const h=e[o].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);e[o].unshift(...f)}s(o,d,c)}),this.map(a,(o,c)=>{let u=e[o];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[o]=u,n(o,u,c),u.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return"metas"in n?t[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var cs;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(cs||(cs={}));var us;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(us||(us={}));var H;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(H||(H={}));class Ft{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=M.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new ut(this,q.join,this.params,this.timeout),this.rejoinTimer=new lr(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=M.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=M.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=M.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=M.errored,this.rejoinTimer.scheduleTimeout())}),this._on(q.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Ie(this),this.broadcastEndpointURL=ur(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:o}}=this.params;this._onError(d=>e==null?void 0:e(H.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(H.CLOSED));const c={},u={broadcast:i,presence:a,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(d=>d.filter))!==null&&n!==void 0?n:[],private:o};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){e==null||e(H.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,v=[];for(let w=0;w<p;w++){const g=f[w],{filter:{event:b,schema:_,table:y,filter:x}}=g,T=d&&d[w];if(T&&T.event===b&&T.schema===_&&T.table===y&&T.filter===x)v.push(Object.assign(Object.assign({},g),{id:T.id}));else{this.unsubscribe(),this.state=M.errored,e==null||e(H.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(H.SUBSCRIBED);return}}).receive("error",d=>{this.state=M.errored,e==null||e(H.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(H.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=u.body)===null||n===void 0?void 0:n.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,c;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=M.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(q.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(s=>{const n=new ut(this,q.leave,{},e);n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),a}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new ut(this,e,t,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,i;const a=e.toLocaleLowerCase(),{close:o,error:c,leave:u,join:d}=q;if(s&&[o,c,u,d].indexOf(a)>=0&&s!==this._joinRef())return;let f=this._onMessage(a,t,s);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(p=>{var v,w,g;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((g=(w=p.filter)===null||w===void 0?void 0:w.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===a}).map(p=>p.callback(f,s)):(i=this.bindings[a])===null||i===void 0||i.filter(p=>{var v,w,g,b,_,y;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const x=p.id,T=(v=p.filter)===null||v===void 0?void 0:v.event;return x&&((w=t.ids)===null||w===void 0?void 0:w.includes(x))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((g=t.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const x=(_=(b=p==null?void 0:p.filter)===null||b===void 0?void 0:b.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return x==="*"||x===((y=t==null?void 0:t.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:w,table:g,commit_timestamp:b,type:_,errors:y}=v;f=Object.assign(Object.assign({},{schema:w,table:g,commit_timestamp:b,eventType:_,new:{},old:{},errors:y}),this._getPayloadRecords(v))}p.callback(f,s)})}_isClosed(){return this.state===M.closed}_isJoined(){return this.state===M.joined}_isJoining(){return this.state===M.joining}_isLeaving(){return this.state===M.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Ft.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(q.close,{},e)}_onError(e){this._on(q.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=M.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=os(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=os(e.columns,e.old_record)),t}}const ds=()=>{},Ii=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ni{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=_i,this.params={},this.timeout=or,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ds,this.ref=0,this.logger=ds,this.conn=null,this.sendBuffer=[],this.serializer=new ki,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>Me(async()=>{const{default:c}=await Promise.resolve().then(()=>_e);return{default:c}},void 0).then(({default:c})=>c(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${jt.websocket}`,this.httpEndpoint=ur(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=(s=t==null?void 0:t.params)===null||s===void 0?void 0:s.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,a)=>a(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new lr(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=xt),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new Ri(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:xi}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels=this.channels.filter(s=>s._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case we.connecting:return re.Connecting;case we.open:return re.Open;case we.closing:return re.Closing;default:return re.Closed}}isConnected(){return this.connectionState()===re.Open}channel(e,t={config:{}}){const s=`realtime:${e}`,n=this.getChannels().find(i=>i.topic===s);if(n)return n;{const i=new Ft(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:s,payload:n,ref:i}=e,a=()=>{this.encode(e,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${t} ${s} (${i})`,n),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{t&&s.updateJoinPayload({access_token:t,version:this.headers&&this.headers["X-Client-Info"]}),s.joinedOnce&&s._isJoined()&&s._push(q.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(ji,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:n,payload:i,ref:a}=t;s==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${n} ${a&&"("+a+")"||""}`,i),Array.from(this.channels).filter(o=>o._isMember(s)).forEach(o=>o._trigger(n,i,a)),this.stateChangeCallbacks.message.forEach(o=>o(t))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(q.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${s}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([Ii],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}}class Ri{constructor(e,t,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=we.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class Bt extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function D(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class Oi extends Bt{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Tt extends Bt{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var $i=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(o,c)}u((s=s.apply(r,e||[])).next())})};const dr=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Me(async()=>{const{default:s}=await Promise.resolve().then(()=>_e);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Li=()=>$i(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Me(()=>Promise.resolve().then(()=>_e),void 0)).Response:Response}),St=r=>{if(Array.isArray(r))return r.map(t=>St(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,s])=>{const n=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=St(s)}),e};var ne=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(o,c)}u((s=s.apply(r,e||[])).next())})};const dt=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Di=(r,e,t)=>ne(void 0,void 0,void 0,function*(){const s=yield Li();r instanceof s&&!(t!=null&&t.noResolveJson)?r.json().then(n=>{e(new Oi(dt(n),r.status||500))}).catch(n=>{e(new Tt(dt(n),n))}):e(new Tt(dt(r),r))}),Mi=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(n.body=JSON.stringify(s)),Object.assign(Object.assign({},n),t))};function Ue(r,e,t,s,n,i){return ne(this,void 0,void 0,function*(){return new Promise((a,o)=>{r(t,Mi(e,s,n,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>Di(c,o,s))})})}function st(r,e,t,s){return ne(this,void 0,void 0,function*(){return Ue(r,"GET",e,t,s)})}function X(r,e,t,s,n){return ne(this,void 0,void 0,function*(){return Ue(r,"POST",e,s,n,t)})}function Ui(r,e,t,s,n){return ne(this,void 0,void 0,function*(){return Ue(r,"PUT",e,s,n,t)})}function Fi(r,e,t,s){return ne(this,void 0,void 0,function*(){return Ue(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function hr(r,e,t,s,n){return ne(this,void 0,void 0,function*(){return Ue(r,"DELETE",e,s,n,t)})}var F=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(o,c)}u((s=s.apply(r,e||[])).next())})};const Bi={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},hs={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class qi{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=dr(n)}uploadOrUpdate(e,t,s,n){return F(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},hs),n);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=s,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(o=Object.assign(Object.assign({},o),n.headers));const u=this._removeEmptyFolders(t),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:i,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),f=yield h.json();return h.ok?{data:{path:u,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(D(i))return{data:null,error:i};throw i}})}upload(e,t,s){return F(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return F(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let c;const u=Object.assign({upsert:hs.upsert},n),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",u.cacheControl)):(c=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(o.toString(),{method:"PUT",body:c,headers:d}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(D(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return F(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);t!=null&&t.upsert&&(n["x-upsert"]="true");const i=yield X(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new Bt("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(s){if(D(s))return{data:null,error:s};throw s}})}update(e,t,s){return F(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return F(this,void 0,void 0,function*(){try{return{data:yield X(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(D(n))return{data:null,error:n};throw n}})}copy(e,t,s){return F(this,void 0,void 0,function*(){try{return{data:{path:(yield X(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(D(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,s){return F(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield X(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(n){if(D(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return F(this,void 0,void 0,function*(){try{const n=yield X(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(n){if(D(n))return{data:null,error:n};throw n}})}download(e,t){return F(this,void 0,void 0,function*(){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield st(this.fetch,`${this.url}/${n}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(D(o))return{data:null,error:o};throw o}})}info(e){return F(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield st(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:St(s),error:null}}catch(s){if(D(s))return{data:null,error:s};throw s}})}exists(e){return F(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Fi(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(D(s)&&s instanceof Tt){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&n.push(c);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${s}${u}`)}}}remove(e){return F(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(D(t))return{data:null,error:t};throw t}})}list(e,t,s){return F(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Bi),t),{prefix:e||""});return{data:yield X(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(D(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Wi="2.7.1",Vi={"X-Client-Info":`storage-js/${Wi}`};var de=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(o,c)}u((s=s.apply(r,e||[])).next())})};class zi{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},Vi),t),this.fetch=dr(s)}listBuckets(){return de(this,void 0,void 0,function*(){try{return{data:yield st(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(D(e))return{data:null,error:e};throw e}})}getBucket(e){return de(this,void 0,void 0,function*(){try{return{data:yield st(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(D(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return de(this,void 0,void 0,function*(){try{return{data:yield X(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(D(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return de(this,void 0,void 0,function*(){try{return{data:yield Ui(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(D(s))return{data:null,error:s};throw s}})}emptyBucket(e){return de(this,void 0,void 0,function*(){try{return{data:yield X(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(D(t))return{data:null,error:t};throw t}})}deleteBucket(e){return de(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(D(t))return{data:null,error:t};throw t}})}}class Hi extends zi{constructor(e,t={},s){super(e,t,s)}from(e){return new qi(this.url,this.headers,e,this.fetch)}}const Ji="2.50.0";let Ce="";typeof Deno<"u"?Ce="deno":typeof document<"u"?Ce="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ce="react-native":Ce="node";const Ki={"X-Client-Info":`supabase-js-${Ce}/${Ji}`},Gi={headers:Ki},Xi={schema:"public"},Yi={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Qi={};var Zi=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(o,c)}u((s=s.apply(r,e||[])).next())})};const ea=r=>{let e;return r?e=r:typeof fetch>"u"?e=tr:e=fetch,(...t)=>e(...t)},ta=()=>typeof Headers>"u"?sr:Headers,sa=(r,e,t)=>{const s=ea(t),n=ta();return(i,a)=>Zi(void 0,void 0,void 0,function*(){var o;const c=(o=yield e())!==null&&o!==void 0?o:r;let u=new n(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",r),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},a),{headers:u}))})};var ra=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(o,c)}u((s=s.apply(r,e||[])).next())})};function na(r){return r.endsWith("/")?r:r+"/"}function ia(r,e){var t,s;const{db:n,auth:i,realtime:a,global:o}=r,{db:c,auth:u,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),a),global:Object.assign(Object.assign(Object.assign({},h),o),{headers:Object.assign(Object.assign({},(t=h==null?void 0:h.headers)!==null&&t!==void 0?t:{}),(s=o==null?void 0:o.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>ra(this,void 0,void 0,function*(){return""})};return r.accessToken?f.accessToken=r.accessToken:delete f.accessToken,f}const fr="2.70.0",ge=30*1e3,Et=3,ht=Et*ge,aa="http://localhost:9999",oa="supabase.auth.token",la={"X-Client-Info":`gotrue-js/${fr}`},Pt="X-Supabase-Api-Version",mr={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ca=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ua=6e5;class qt extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function k(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class da extends qt{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function ha(r){return k(r)&&r.name==="AuthApiError"}class pr extends qt{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Z extends qt{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class G extends Z{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function fa(r){return k(r)&&r.name==="AuthSessionMissingError"}class ze extends Z{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class He extends Z{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Je extends Z{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ma(r){return k(r)&&r.name==="AuthImplicitGrantRedirectError"}class fs extends Z{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ct extends Z{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function ft(r){return k(r)&&r.name==="AuthRetryableFetchError"}class ms extends Z{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Ne extends Z{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const rt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ps=` 	
\r=`.split(""),pa=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<ps.length;e+=1)r[ps[e].charCodeAt(0)]=-2;for(let e=0;e<rt.length;e+=1)r[rt[e].charCodeAt(0)]=e;return r})();function gs(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(rt[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(rt[s]),e.queuedBits-=6}}function gr(r,e,t){const s=pa[r];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function vs(r){const e=[],t=a=>{e.push(String.fromCodePoint(a))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=a=>{wa(a,s,t)};for(let a=0;a<r.length;a+=1)gr(r.charCodeAt(a),n,i);return e.join("")}function ga(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function va(r,e){for(let t=0;t<r.length;t+=1){let s=r.charCodeAt(t);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(r.charCodeAt(t+1)-56320&65535|n)+65536,t+=1}ga(s,e)}}function wa(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let s=1;s<6;s+=1)if((r>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function ya(r){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};for(let n=0;n<r.length;n+=1)gr(r.charCodeAt(n),t,s);return new Uint8Array(e)}function ba(r){const e=[];return va(r,t=>e.push(t)),new Uint8Array(e)}function _a(r){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};return r.forEach(n=>gs(n,t,s)),gs(null,t,s),e.join("")}function xa(r){return Math.round(Date.now()/1e3)+r}function ja(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const B=()=>typeof window<"u"&&typeof document<"u",ee={tested:!1,writable:!1},Re=()=>{if(!B())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ee.tested)return ee.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),ee.tested=!0,ee.writable=!0}catch{ee.tested=!0,ee.writable=!1}return ee.writable};function ka(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return t.searchParams.forEach((s,n)=>{e[n]=s}),e}const vr=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Me(async()=>{const{default:s}=await Promise.resolve().then(()=>_e);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Ta=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",wr=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},Ke=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Ge=async(r,e)=>{await r.removeItem(e)};class it{constructor(){this.promise=new it.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}it.promiseConstructor=Promise;function mt(r){const e=r.split(".");if(e.length!==3)throw new Ne("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!ca.test(e[s]))throw new Ne("JWT not in base64url format");return{header:JSON.parse(vs(e[0])),payload:JSON.parse(vs(e[1])),signature:ya(e[2]),raw:{header:e[0],payload:e[1]}}}async function Sa(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function Ea(r,e){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await r(i);if(!e(i,null,a)){s(a);return}}catch(a){if(!e(i,a)){n(a);return}}})()})}function Pa(r){return("0"+r.toString(16)).substr(-2)}function Ca(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let n="";for(let i=0;i<56;i++)n+=t.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,Pa).join("")}async function Aa(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function Ia(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await Aa(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function he(r,e,t=!1){const s=Ca();let n=s;t&&(n+="/PASSWORD_RECOVERY"),await wr(r,`${e}-code-verifier`,n);const i=await Ia(s);return[i,s===i?"plain":"s256"]}const Na=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ra(r){const e=r.headers.get(Pt);if(!e||!e.match(Na))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Oa(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function $a(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const La=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function fe(r){if(!La.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Da=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};const te=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Ma=[502,503,504];async function ws(r){var e;if(!Ta(r))throw new Ct(te(r),0);if(Ma.includes(r.status))throw new Ct(te(r),r.status);let t;try{t=await r.json()}catch(i){throw new pr(te(i),i)}let s;const n=Ra(r);if(n&&n.getTime()>=mr["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new ms(te(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new G}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new ms(te(t),r.status,t.weak_password.reasons);throw new da(te(t),r.status||500,s)}const Ua=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};async function E(r,e,t,s){var n;const i=Object.assign({},s==null?void 0:s.headers);i[Pt]||(i[Pt]=mr["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const a=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(a.redirect_to=s.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await Fa(r,e,t+o,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function Fa(r,e,t,s,n,i){const a=Ua(e,s,n,i);let o;try{o=await r(t,Object.assign({},a))}catch(c){throw console.error(c),new Ct(te(c),0)}if(o.ok||await ws(o),s!=null&&s.noResolveJson)return o;try{return await o.json()}catch(c){await ws(c)}}function z(r){var e;let t=null;Va(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=xa(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function ys(r){const e=z(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Y(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Ba(r){return{data:r,error:null}}function qa(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i}=r,a=Da(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i},c=Object.assign({},a);return{data:{properties:o,user:c},error:null}}function Wa(r){return r}function Va(r){return r.access_token&&r.refresh_token&&r.expires_in}const pt=["global","local","others"];var za=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};class Ha{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=vr(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=pt[0]){if(pt.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${pt.join(", ")}`);try{return await E(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(k(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await E(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Y})}catch(s){if(k(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=za(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await E(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:qa,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(k(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await E(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Y})}catch(t){if(k(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,i,a,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await E(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Wa});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(v.split(";")[1].split("=")[1]);u[`${g}Page`]=w}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(k(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){fe(e);try{return await E(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Y})}catch(t){if(k(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){fe(e);try{return await E(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Y})}catch(s){if(k(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){fe(e);try{return await E(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Y})}catch(s){if(k(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){fe(e.userId);try{const{data:t,error:s}=await E(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:s}}catch(t){if(k(t))return{data:null,error:t};throw t}}async _deleteFactor(e){fe(e.userId),fe(e.id);try{return{data:await E(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(k(t))return{data:null,error:t};throw t}}}const Ja={getItem:r=>Re()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{Re()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{Re()&&globalThis.localStorage.removeItem(r)}};function bs(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function Ka(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const me={debug:!!(globalThis&&Re()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class yr extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ga extends yr{}async function Xa(r,e,t){me.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),me.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){me.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,n.name);try{return await t()}finally{me.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,n.name)}}else{if(e===0)throw me.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new Ga(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(me.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Ka();const Ya={url:aa,storageKey:oa,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:la,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function _s(r,e,t){return await t()}class Oe{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Oe.nextInstanceID,Oe.nextInstanceID+=1,this.instanceID>0&&B()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Ya),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Ha({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=vr(n.fetch),this.lock=n.lock||_s,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:B()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Xa:this.lock=_s,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Re()?this.storage=Ja:(this.memoryStorage={},this.storage=bs(this.memoryStorage)):(this.memoryStorage={},this.storage=bs(this.memoryStorage)),B()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${fr}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=ka(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),B()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:i}=await this._getSessionFromURL(t,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),ma(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return k(t)?{error:t}:{error:new pr("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{const i=await E(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:z}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(k(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,s,n;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await he(this.storage,this.storageKey)),i=await E(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:v},xform:z})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await E(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},channel:(n=f==null?void 0:f.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:z})}else throw new He("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(k(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:a,options:o}=e;t=await E(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ys})}else if("phone"in e){const{phone:i,password:a,options:o}=e;t=await E(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ys})}else throw new He("You must provide either an email or phone number and a password");const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new ze}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(t){if(k(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,n,i,a,o,c,u,d,h,f,p;let v,w;if("message"in e)v=e.message,w=e.signature;else{const{chain:g,wallet:b,statement:_,options:y}=e;let x;if(B())if(typeof b=="object")x=b;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))x=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=b}const T=new URL((t=y==null?void 0:y.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in x&&x.signIn){const j=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),_?{statement:_}:null));let A;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")A=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)A=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in A&&"signature"in A&&(typeof A.signedMessage=="string"||A.signedMessage instanceof Uint8Array)&&A.signature instanceof Uint8Array)v=typeof A.signedMessage=="string"?A.signedMessage:new TextDecoder().decode(A.signedMessage),w=A.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${T.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(n=(s=y==null?void 0:y.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(A=>`- ${A}`)]:[]].join(`
`);const j=await x.signMessage(new TextEncoder().encode(v),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=j}}try{const{data:g,error:b}=await E(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:_a(w)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:z});if(b)throw b;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new ze}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:b})}catch(g){if(k(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){const t=await Ke(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(t??"").split("/");try{const{data:i,error:a}=await E(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:z});if(await Ge(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ze}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:a})}catch(i){if(k(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:s,token:n,access_token:i,nonce:a}=e,o=await E(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:z}),{data:c,error:u}=o;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ze}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(t){if(k(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,n,i,a;try{if("email"in e){const{email:o,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await he(this.storage,this.storageKey));const{error:h}=await E(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:o,options:c}=e,{data:u,error:d}=await E(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new He("You must provide either an email or phone number.")}catch(o){if(k(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,s;try{let n,i;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:a,error:o}=await E(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:z});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(n){if(k(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,s,n;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await he(this.storage,this.storageKey)),await E(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:Ba})}catch(i){if(k(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new G;const{error:n}=await E(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(k(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:i}=e,{error:a}=await E(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:s,type:n,options:i}=e,{data:a,error:o}=await E(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new He("You must provide either an email or phone number and a type")}catch(t){if(k(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Ke(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<ht:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await E(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Y}):await this._useSession(async t=>{var s,n,i;const{data:a,error:o}=t;if(o)throw o;return!(!((s=a.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new G}:await E(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Y})})}catch(t){if(k(t))return fa(t)&&(await this._removeSession(),await Ge(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new G;const a=n.session;let o=null,c=null;this.flowType==="pkce"&&e.email!=null&&([o,c]=await he(this.storage,this.storageKey));const{data:u,error:d}=await E(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:c}),jwt:a.access_token,xform:Y});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(s){if(k(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new G;const t=Date.now()/1e3;let s=t,n=!0,i=null;const{payload:a}=mt(e.access_token);if(a.exp&&(s=a.exp,n=s<=t),n){const{session:o,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(k(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(s=a.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new G;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(k(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!B())throw new Je("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Je(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new fs("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Je("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new fs("No code detected.");const{data:_,error:y}=await this._exchangeCodeForSession(e.code);if(y)throw y;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:a,expires_in:o,expires_at:c,token_type:u}=e;if(!i||!o||!a||!u)throw new Je("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(o);let f=d+h;c&&(f=parseInt(c));const p=f-d;p*1e3<=ge&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const v=f-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,d);const{data:w,error:g}=await this._getUser(i);if(g)throw g;const b={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(s){if(k(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ke(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{error:i};const a=(s=n.session)===null||s===void 0?void 0:s.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(ha(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Ge(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=ja(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:i},error:a}=t;if(a)throw a;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await he(this.storage,this.storageKey,!0));try{return await E(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(k(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(k(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession(async i=>{var a,o,c,u,d;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await E(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(n)throw n;return B()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(k(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:a}=t;if(a)throw a;return await E(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(k(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await Ea(async n=>(n>0&&await Sa(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await E(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:z})),(n,i)=>{const a=200*Math.pow(2,n);return i&&ft(i)&&Date.now()+a-s<ge})}catch(s){if(this._debug(t,"error",s),k(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),B()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await Ke(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const n=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<ht;if(this._debug(t,`session has${n?"":" not"} expired with margin of ${ht}s`),n){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),ft(i)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new G;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new it;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new G;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(n,"error",i),k(i)){const a={session:null,error:i};return ft(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await wr(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ge(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&B()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ge);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/ge);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${ge}ms, refresh threshold is ${Et} ticks`),n<=Et&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof yr)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!B()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,a]=await he(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(o.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await E(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(k(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:a}=t;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await E(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(k(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:o}=await E(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(k(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await E(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(k(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],n=s.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=s.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:s,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=mt(n.access_token);let o=null;a.aal&&(o=a.aal);let c=o;((s=(t=n.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const d=a.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(a=>a.kid===e);if(s||(s=this.jwks.keys.find(a=>a.kid===e),s&&this.jwks_cached_at+ua>Date.now()))return s;const{data:n,error:i}=await E(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!n.keys||n.keys.length===0)throw new Ne("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),s=n.keys.find(a=>a.kid===e),!s)throw new Ne("No matching signing key found in JWKS");return s}async getClaims(e,t={keys:[]}){try{let s=e;if(!s){const{data:p,error:v}=await this.getSession();if(v||!p.session)return{data:null,error:v};s=p.session.access_token}const{header:n,payload:i,signature:a,raw:{header:o,payload:c}}=mt(s);if(Oa(i.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(s);if(p)throw p;return{data:{claims:i,header:n,signature:a},error:null}}const u=$a(n.alg),d=await this.fetchJwk(n.kid,t),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,a,ba(`${o}.${c}`)))throw new Ne("Invalid JWT signature");return{data:{claims:i,header:n,signature:a},error:null}}catch(s){if(k(s))return{data:null,error:s};throw s}}}Oe.nextInstanceID=0;const Qa=Oe;class Za extends Qa{constructor(e){super(e)}}var eo=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(o,c)}u((s=s.apply(r,e||[])).next())})};class to{constructor(e,t,s){var n,i,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=na(e),c=new URL(o);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:Xi,realtime:Qi,auth:Object.assign(Object.assign({},Yi),{storageKey:u}),global:Gi},h=ia(s??{},d);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=sa(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new yi(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new oi(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Hi(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return eo(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:i,flowType:a,lock:o,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Za({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:a,lock:o,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Ni(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const br=(r,e,t)=>new to(r,e,t),so="https://fkyokvjruvgsritmazey.supabase.co",ro="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZreW9rdmpydXZnc3JpdG1hemV5Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0OTMwNTc1MywiZXhwIjoyMDY0ODgxNzUzfQ.2s8Wpf_IjYG5OKL0w7BsPe6k5NIm2kYO6IH0MY8uLgE",se=br(so,ro),no=Nt("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),_r=m.forwardRef(({className:r,variant:e,size:t,asChild:s=!1,...n},i)=>{const a=s?Mr:"button";return l.jsx(a,{className:O(no({variant:e,size:t,className:r})),ref:i,...n})});_r.displayName="Button";const xr=m.forwardRef(({className:r,type:e,...t},s)=>l.jsx("input",{type:e,className:O("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:s,...t}));xr.displayName="Input";function io(){const[r,e]=m.useState(""),[t,s]=m.useState(!1),{toast:n}=Dt(),i=async a=>{a.preventDefault(),s(!0);try{const{error:o}=await se.auth.signInWithOtp({email:r,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}});if(o)throw o;n({title:"Magic link sent!",description:"Check your email for the login link."})}catch(o){n({variant:"destructive",title:"Error",description:o instanceof Error?o.message:"Failed to send magic link"})}finally{s(!1)}};return l.jsxs("div",{className:"w-full max-w-md mx-auto p-6 space-y-6",children:[l.jsxs("div",{className:"space-y-2 text-center",children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Welcome back"}),l.jsx("p",{className:"text-gray-500",children:"Enter your email to sign in"})]}),l.jsxs("form",{onSubmit:i,className:"space-y-4",children:[l.jsx("div",{className:"space-y-2",children:l.jsx(xr,{type:"email",placeholder:"name@example.com",value:r,onChange:a=>e(a.target.value),required:!0,className:"w-full"})}),l.jsx(_r,{type:"submit",className:"w-full",disabled:t,children:t?"Sending link...":"Send magic link"})]})]})}function ao(){return l.jsx(io,{})}const oo=Wr,lo=Vr,jr=m.forwardRef(({className:r,children:e,...t},s)=>l.jsxs(Ps,{ref:s,className:O("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...t,children:[e,l.jsx(nn,{className:"h-4 w-4 opacity-50"})]}));jr.displayName=Ps.displayName;const kr=m.forwardRef(({className:r,children:e,position:t="popper",...s},n)=>l.jsx(Ur,{children:l.jsx(Cs,{ref:n,className:O("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:t,...s,children:l.jsx(Fr,{className:O("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e})})}));kr.displayName=Cs.displayName;const At=m.forwardRef(({className:r,children:e,...t},s)=>l.jsxs(As,{ref:s,className:O("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...t,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(Br,{children:l.jsx(an,{className:"h-4 w-4"})})}),l.jsx(qr,{children:e})]}));At.displayName=As.displayName;const $e=m.forwardRef(({className:r,...e},t)=>l.jsx("div",{ref:t,className:O("rounded-lg border bg-card text-card-foreground shadow-sm",r),...e}));$e.displayName="Card";const Tr=m.forwardRef(({className:r,...e},t)=>l.jsx("div",{ref:t,className:O("flex flex-col space-y-1.5 p-6",r),...e}));Tr.displayName="CardHeader";const co=m.forwardRef(({className:r,...e},t)=>l.jsx("h3",{ref:t,className:O("text-2xl font-semibold leading-none tracking-tight",r),...e}));co.displayName="CardTitle";const uo=m.forwardRef(({className:r,...e},t)=>l.jsx("p",{ref:t,className:O("text-sm text-muted-foreground",r),...e}));uo.displayName="CardDescription";const Le=m.forwardRef(({className:r,...e},t)=>l.jsx("div",{ref:t,className:O("p-6 pt-0",r),...e}));Le.displayName="CardContent";const ho=m.forwardRef(({className:r,...e},t)=>l.jsx("div",{ref:t,className:O("flex items-center p-6 pt-0",r),...e}));ho.displayName="CardFooter";const Xe=43200,xs=1440,js=Symbol.for("constructDateFrom");function Wt(r,e){return typeof r=="function"?r(e):r&&typeof r=="object"&&js in r?r[js](e):r instanceof Date?new r.constructor(e):new Date(e)}function Q(r,e){return Wt(r,r)}let fo={};function mo(){return fo}function ks(r){const e=Q(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function Vt(r,...e){const t=Wt.bind(null,r||e.find(s=>typeof s=="object"));return e.map(t)}function et(r,e){const t=+Q(r)-+Q(e);return t<0?-1:t>0?1:t}function po(r){return Wt(r,Date.now())}function go(r,e,t){const[s,n]=Vt(t==null?void 0:t.in,r,e),i=s.getFullYear()-n.getFullYear(),a=s.getMonth()-n.getMonth();return i*12+a}function vo(r){return e=>{const s=(r?Math[r]:Math.trunc)(e);return s===0?0:s}}function wo(r,e){return+Q(r)-+Q(e)}function yo(r,e){const t=Q(r);return t.setHours(23,59,59,999),t}function bo(r,e){const t=Q(r),s=t.getMonth();return t.setFullYear(t.getFullYear(),s+1,0),t.setHours(23,59,59,999),t}function _o(r,e){const t=Q(r);return+yo(t)==+bo(t)}function xo(r,e,t){const[s,n,i]=Vt(t==null?void 0:t.in,r,r,e),a=et(n,i),o=Math.abs(go(n,i));if(o<1)return 0;n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-a*o);let c=et(n,i)===-a;_o(s)&&o===1&&et(s,i)===1&&(c=!1);const u=a*(o-+c);return u===0?0:u}function jo(r,e,t){const s=wo(r,e)/1e3;return vo(t==null?void 0:t.roundingMethod)(s)}const ko={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},To=(r,e,t)=>{let s;const n=ko[r];return typeof n=="string"?s=n:e===1?s=n.one:s=n.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+s:s+" ago":s};function gt(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const So={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Eo={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Po={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Co={date:gt({formats:So,defaultWidth:"full"}),time:gt({formats:Eo,defaultWidth:"full"}),dateTime:gt({formats:Po,defaultWidth:"full"})},Ao={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Io=(r,e,t,s)=>Ao[r];function Se(r){return(e,t)=>{const s=t!=null&&t.context?String(t.context):"standalone";let n;if(s==="formatting"&&r.formattingValues){const a=r.defaultFormattingWidth||r.defaultWidth,o=t!=null&&t.width?String(t.width):a;n=r.formattingValues[o]||r.formattingValues[a]}else{const a=r.defaultWidth,o=t!=null&&t.width?String(t.width):r.defaultWidth;n=r.values[o]||r.values[a]}const i=r.argumentCallback?r.argumentCallback(e):e;return n[i]}}const No={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ro={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Oo={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},$o={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Lo={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Do={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Mo=(r,e)=>{const t=Number(r),s=t%100;if(s>20||s<10)switch(s%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Uo={ordinalNumber:Mo,era:Se({values:No,defaultWidth:"wide"}),quarter:Se({values:Ro,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Se({values:Oo,defaultWidth:"wide"}),day:Se({values:$o,defaultWidth:"wide"}),dayPeriod:Se({values:Lo,defaultWidth:"wide",formattingValues:Do,defaultFormattingWidth:"wide"})};function Ee(r){return(e,t={})=>{const s=t.width,n=s&&r.matchPatterns[s]||r.matchPatterns[r.defaultMatchWidth],i=e.match(n);if(!i)return null;const a=i[0],o=s&&r.parsePatterns[s]||r.parsePatterns[r.defaultParseWidth],c=Array.isArray(o)?Bo(o,h=>h.test(a)):Fo(o,h=>h.test(a));let u;u=r.valueCallback?r.valueCallback(c):c,u=t.valueCallback?t.valueCallback(u):u;const d=e.slice(a.length);return{value:u,rest:d}}}function Fo(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function Bo(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function qo(r){return(e,t={})=>{const s=e.match(r.matchPattern);if(!s)return null;const n=s[0],i=e.match(r.parsePattern);if(!i)return null;let a=r.valueCallback?r.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;const o=e.slice(n.length);return{value:a,rest:o}}}const Wo=/^(\d+)(th|st|nd|rd)?/i,Vo=/\d+/i,zo={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ho={any:[/^b/i,/^(a|c)/i]},Jo={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ko={any:[/1/i,/2/i,/3/i,/4/i]},Go={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Xo={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Yo={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Qo={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Zo={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},el={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},tl={ordinalNumber:qo({matchPattern:Wo,parsePattern:Vo,valueCallback:r=>parseInt(r,10)}),era:Ee({matchPatterns:zo,defaultMatchWidth:"wide",parsePatterns:Ho,defaultParseWidth:"any"}),quarter:Ee({matchPatterns:Jo,defaultMatchWidth:"wide",parsePatterns:Ko,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Ee({matchPatterns:Go,defaultMatchWidth:"wide",parsePatterns:Xo,defaultParseWidth:"any"}),day:Ee({matchPatterns:Yo,defaultMatchWidth:"wide",parsePatterns:Qo,defaultParseWidth:"any"}),dayPeriod:Ee({matchPatterns:Zo,defaultMatchWidth:"any",parsePatterns:el,defaultParseWidth:"any"})},sl={code:"en-US",formatDistance:To,formatLong:Co,formatRelative:Io,localize:Uo,match:tl,options:{weekStartsOn:0,firstWeekContainsDate:1}};function rl(r,e,t){const s=mo(),n=(t==null?void 0:t.locale)??s.locale??sl,i=2520,a=et(r,e);if(isNaN(a))throw new RangeError("Invalid time value");const o=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:a}),[c,u]=Vt(t==null?void 0:t.in,...a>0?[e,r]:[r,e]),d=jo(u,c),h=(ks(u)-ks(c))/1e3,f=Math.round((d-h)/60);let p;if(f<2)return t!=null&&t.includeSeconds?d<5?n.formatDistance("lessThanXSeconds",5,o):d<10?n.formatDistance("lessThanXSeconds",10,o):d<20?n.formatDistance("lessThanXSeconds",20,o):d<40?n.formatDistance("halfAMinute",0,o):d<60?n.formatDistance("lessThanXMinutes",1,o):n.formatDistance("xMinutes",1,o):f===0?n.formatDistance("lessThanXMinutes",1,o):n.formatDistance("xMinutes",f,o);if(f<45)return n.formatDistance("xMinutes",f,o);if(f<90)return n.formatDistance("aboutXHours",1,o);if(f<xs){const v=Math.round(f/60);return n.formatDistance("aboutXHours",v,o)}else{if(f<i)return n.formatDistance("xDays",1,o);if(f<Xe){const v=Math.round(f/xs);return n.formatDistance("xDays",v,o)}else if(f<Xe*2)return p=Math.round(f/Xe),n.formatDistance("aboutXMonths",p,o)}if(p=xo(u,c),p<12){const v=Math.round(f/Xe);return n.formatDistance("xMonths",v,o)}else{const v=p%12,w=Math.trunc(p/12);return v<3?n.formatDistance("aboutXYears",w,o):v<9?n.formatDistance("overXYears",w,o):n.formatDistance("almostXYears",w+1,o)}}function nl(r,e){return rl(r,po(r),e)}const il=Nt("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function al({className:r,variant:e,...t}){return l.jsx("div",{className:O(il({variant:e}),r),...t})}function ol({title:r,titleId:e,...t},s){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),r?m.createElement("title",{id:e},r):null,m.createElement("path",{d:"M7.493 18.5c-.425 0-.82-.236-.975-.632A7.48 7.48 0 0 1 6 15.125c0-1.75.599-3.358 1.602-4.634.151-.192.373-.309.6-.397.473-.183.89-.514 1.212-.924a9.042 9.042 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75A.75.75 0 0 1 15 2a2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H14.23c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23h-.777ZM2.331 10.727a11.969 11.969 0 0 0-.831 4.398 12 12 0 0 0 .52 3.507C2.28 19.482 3.105 20 3.994 20H4.9c.445 0 .72-.498.523-.898a8.963 8.963 0 0 1-.924-3.977c0-1.708.476-3.305 1.302-4.666.245-.403-.028-.959-.5-.959H4.25c-.832 0-1.612.453-1.918 1.227Z"}))}const ll=m.forwardRef(ol);function cl({news:r}){var f;const[e,t]=m.useState(!1),[s,n]=m.useState(0),{toast:i}=Dt(),a=It();m.useEffect(()=>{o(),c()},[r.id]);const o=async()=>{const{count:p}=await se.from("news_likes").select("*",{count:"exact"}).eq("news_id",r.id);n(p||0)},c=async()=>{const{data:{user:p}}=await se.auth.getUser();if(!p)return;const{data:v}=await se.from("news_likes").select("*").eq("news_id",r.id).eq("user_id",p.id).single();t(!!v)},u=async()=>{const{data:{user:p}}=await se.auth.getUser();if(!p){i({title:"Login Required",description:"Please login to like news items",action:l.jsx("button",{onClick:()=>a("/login"),className:"px-3 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Login"})});return}e?(await se.from("news_likes").delete().eq("news_id",r.id).eq("user_id",p.id),n(v=>v-1)):(await se.from("news_likes").insert([{news_id:r.id,user_id:p.id}]),n(v=>v+1)),t(!e)},d=((f=r.campus)==null?void 0:f.name)??"Unknown",h=nl(new Date(r.published_at),{addSuffix:!0});return l.jsx($e,{className:"border border-neutral-400 rounded-xl p-3 bg-white text-neutral-900 shadow-sm",children:l.jsxs(Le,{className:"p-0 space-y-1.5",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(al,{className:"px-2 py-1 rounded-md border border-neutral-400 text-xs",children:d}),l.jsx("span",{className:"text-sm text-neutral-600",children:h})]}),l.jsx("h3",{className:"text-lg font-semibold text-neutral-900",children:r.title}),l.jsx("p",{className:"text-sm leading-relaxed text-neutral-600",children:r.content}),l.jsxs("div",{className:"flex items-center justify-between pt-2",children:[l.jsxs("button",{onClick:u,className:"flex items-center gap-1.5 text-neutral-600 hover:text-blue-500 transition-colors",children:[e?l.jsx(ll,{className:"w-5 h-5 text-blue-500"}):l.jsx(Vn,{className:"w-5 h-5"}),l.jsx("span",{className:"text-sm",children:s})]}),r.source_url&&l.jsxs("a",{href:r.source_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 px-2 py-1 rounded-md border border-neutral-400 bg-neutral-100 text-neutral-700 hover:text-neutral-900 text-xs",children:[l.jsx("span",{children:"View Source"}),l.jsx("span",{className:"ml-0.5",children:""})]})]})]})})}function pe({className:r,...e}){return l.jsx("div",{className:O("animate-pulse rounded-md bg-muted/50",r),...e})}function ul(){return l.jsxs($e,{className:"overflow-hidden relative",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent animate-[shimmer_2s_infinite]"}),l.jsxs(Tr,{className:"space-y-2 p-4",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[l.jsx(pe,{className:"h-6 w-3/4"}),l.jsx("div",{className:"flex flex-wrap gap-1.5",children:l.jsx(pe,{className:"h-5 w-24"})})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx(pe,{className:"h-4 w-32"})})]}),l.jsxs(Le,{className:"p-4 pt-0",children:[l.jsx(pe,{className:"h-4 w-full mb-2"}),l.jsx(pe,{className:"h-4 w-5/6 mb-2"}),l.jsx(pe,{className:"h-4 w-4/6"})]})]})}const dl="https://fkyokvjruvgsritmazey.supabase.co",hl="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZreW9rdmpydXZnc3JpdG1hemV5Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0OTMwNTc1MywiZXhwIjoyMDY0ODgxNzUzfQ.2s8Wpf_IjYG5OKL0w7BsPe6k5NIm2kYO6IH0MY8uLgE",Ts=br(dl,hl,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}});function fl(r){const e=r;return{id:e.id,title:e.title,content:e.content,published_at:e.published_at,source_url:e.source_url,campus_id:e.campus_id,created_at:e.created_at,image_url:e.image_url||void 0,campus:e.campus?{id:e.campus.id,name:e.campus.name,location:e.campus.location,created_at:e.campus.created_at}:void 0}}let Pe=null;async function Sr(){try{return Pe||(console.log("Fetching news from Supabase..."),console.log("Supabase URL:","https://fkyokvjruvgsritmazey.supabase.co"),Pe=(async()=>{try{const{error:r}=await Ts.from("news").select("id").limit(1);if(r)return console.error("Supabase connection test failed:",r),{data:[],error:r,count:0};console.log("Supabase connection successful, fetching full news data...");const{data:e,error:t,count:s}=await Ts.from("news").select(`
        *,
        campus:campus_id (
          id,
              name
        )
          `,{count:"exact"}).order("created_at",{ascending:!1});return t?(console.error("Error fetching news:",t),{data:[],error:t,count:0}):{data:e.map(fl),error:null,count:s||0}}finally{Pe=null}})(),Pe)}catch(r){return console.error("Unexpected error in getNews:",r),{data:[],error:r,count:0}}}function ml({initialCampus:r}){const[e,t]=m.useState([]),[s,n]=m.useState(!0),[i,a]=m.useState(null),[o,c]=m.useState(r||"All");m.useEffect(()=>{r&&c(r)},[r]),m.useEffect(()=>{async function f(){try{const{data:p,error:v}=await Sr();if(v){a("Failed to load news. Please try again later.");return}t(p)}catch{a("An unexpected error occurred. Please try again later.")}finally{n(!1)}}f()},[]);const d=[...o==="All"?e:e.filter(f=>{var p;return((p=f.campus)==null?void 0:p.name)===o})].sort((f,p)=>new Date(p.published_at).getTime()-new Date(f.published_at).getTime()),h=Array.from(new Set(e.map(f=>{var p;return(p=f.campus)==null?void 0:p.name}).filter(f=>f!==void 0)));return l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsx("div",{className:"sticky top-14 z-40 bg-white w-full",children:l.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-6 py-4",children:l.jsx("div",{className:"flex flex-col gap-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h1",{className:"text-lg font-medium text-gray-900",children:"GSU News"}),l.jsx("div",{className:"flex items-center gap-4",children:l.jsxs(oo,{value:o,onValueChange:f=>c(f),children:[l.jsx(jr,{className:"w-[180px] h-8 text-sm",children:l.jsx(lo,{children:o==="All"?"All Sources":o})}),l.jsxs(kr,{children:[l.jsx(At,{value:"All",children:"All Sources"}),h.map(f=>l.jsx(At,{value:f,children:f},f))]})]})})]})})})}),l.jsx("div",{className:"flex-1 overflow-y-auto pt-2",children:l.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-6",children:l.jsx("div",{className:"space-y-3",children:s?Array.from({length:3}).map((f,p)=>l.jsx(ul,{},p)):i?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("p",{className:"text-red-600 mb-4",children:i}),l.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Try Again"})]}):d.map(f=>l.jsx(cl,{news:f},f.id))})})})]})}function pl(){const[r]=Yr(),e=r.get("campus");return l.jsx("div",{className:"h-[calc(100vh-3.5rem)]",children:l.jsx(ml,{initialCampus:e})})}const gl={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},Ye={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}},vl=()=>{const r=It();return l.jsxs(N.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},onClick:()=>r(-1),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[l.jsx(on,{className:"w-4 h-4 mr-2"}),l.jsx("span",{className:"text-sm",children:"Back"})]})},wl=()=>l.jsxs(N.div,{variants:gl,initial:"hidden",animate:"visible",className:"space-y-3 text-gray-600",children:[l.jsx(N.p,{variants:Ye,className:"text-sm leading-relaxed",children:"GSU Connect is a centralized digital platform I built to simplify how students, faculty, and staff at Guimaras State University access the latest official news and announcements from across all campuses."}),l.jsx(N.p,{variants:Ye,className:"text-xs italic leading-relaxed",children:"In many schools, updates are scattered across multiple sourceswebsites, Facebook pages, or bulletin boardsmaking it easy to miss important information. GSU Connect solves this by automatically scraping only the newest and most recent news from trusted university sources and displaying it in one organized, easy-to-navigate platform."}),l.jsxs(N.div,{variants:Ye,className:"border border-neutral-200 hover:border-neutral-300 transition-colors duration-200 rounded-lg p-3",children:[l.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-1.5",children:"My goal is simple:"}),l.jsx("p",{className:"text-sm leading-relaxed",children:"To make sure everyone in the GSU community can stay updated without the hassle of checking multiple sites or missing urgent updates."})]}),l.jsx(N.p,{variants:Ye,className:"text-sm leading-relaxed",children:"Whether you're a student tracking school events or a faculty member staying on top of announcements, GSU Connect helps you stay informedfast, reliably, and all in one place."})]});function yl(){return l.jsx("div",{className:"min-h-[calc(100vh-3.5rem)]",children:l.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[l.jsx(vl,{}),l.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"border border-neutral-200 hover:border-neutral-300 transition-colors duration-200 rounded-lg p-4",children:[l.jsx(N.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"text-xl font-semibold text-gray-900 mb-4",children:"About GSU Connect"}),l.jsx(wl,{})]})]})})}function vt({news:r,variant:e,isImageLoaded:t=!1,showTitle:s=!0}){const[n,i]=m.useState(!t),a=()=>{i(!1)},o=()=>{switch(e){case"main":return"h-[180px] sm:h-[220px] md:h-[280px] lg:h-[320px]";case"other":return"h-[160px] sm:h-[200px] md:h-[240px] lg:h-[280px]";default:return"h-[180px]"}},c=d=>new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),u=d=>{r.source_url&&(d.preventDefault(),window.open(r.source_url,"_blank","noopener,noreferrer"))};return l.jsxs(ve,{to:r.source_url?"#":`/news/${r.id}`,onClick:u,className:"block relative",children:[l.jsxs("div",{className:"relative",children:[n&&l.jsx("div",{className:`${o()} w-full bg-gray-100 animate-pulse`}),l.jsx("img",{src:r.image_url,alt:r.title,className:`${o()} w-full object-contain ${n?"hidden":"block"}`,onLoad:a})]}),s?l.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-white/90 backdrop-blur-sm mt-1 space-y-0.5 p-1 md:p-[15px] text-center",children:[l.jsx("h3",{className:"text-[9px] sm:text-[10px] md:text-[10px] font-medium text-gray-900 line-clamp-2 px-1 w-full overflow-hidden",children:r.title}),l.jsxs("div",{className:"flex items-center justify-center gap-1 text-[6px] sm:text-[7px] md:text-[8px] text-gray-500 px-1 w-full",children:[l.jsx("span",{className:"truncate max-w-[60px] md:max-w-[70px]",children:r.source_url?new URL(r.source_url).hostname.replace("www.",""):"GSU"}),l.jsx("span",{children:""}),l.jsx("span",{children:c(r.published_at)})]})]}):l.jsx("div",{className:"h-[70px] sm:h-[80px]"})]})}function bl({news:r,loading:e,error:t}){const[s,n]=m.useState(0),[i,a]=m.useState(0),[o,c]=m.useState(null),[u,d]=m.useState(null),[h,f]=m.useState({}),p=m.useRef(void 0),v=50;m.useEffect(()=>{(async()=>{if(!r.length)return;const C={};r.forEach($=>{$.image_url&&(C[$.id]={width:0,height:0,isValid:!1,isLoading:!0})}),f(C);for(const $ of r)if($.image_url)try{const R=new Image;await new Promise((S,U)=>{R.onload=S,R.onerror=U,R.src=$.image_url});const V=R.width/R.height;f(S=>({...S,[$.id]:{width:R.width,height:R.height,isValid:V>=1&&V<=1.7777777777777777,isLoading:!1}}))}catch(R){console.warn(`Failed to load image for news item ${$.id}:`,R),f(V=>({...V,[$.id]:{width:0,height:0,isValid:!1,isLoading:!1}}))}})()},[r]);const w=m.useMemo(()=>r.filter(P=>{const C=h[P.id];return P.image_url&&(C==null?void 0:C.isValid)&&!C.isLoading}).sort((P,C)=>new Date(C.created_at).getTime()-new Date(P.created_at).getTime()).slice(0,5),[r,h]),g=m.useCallback(()=>{p.current&&clearInterval(p.current),p.current=setInterval(()=>{a(1),n(P=>(P+1)%w.length)},3300)},[w.length]);m.useEffect(()=>(w.length>0&&g(),()=>{p.current&&clearInterval(p.current)}),[w.length,g]);const b=P=>{d(null),c(P.targetTouches[0].clientX),g()},_=P=>{const C=P.targetTouches[0].clientX,$=P.targetTouches[0].clientY;if(o&&Math.abs(C-o)>Math.abs($-(o?P.targetTouches[0].clientY:0))&&P.preventDefault(),d(C),o){const R=o-C;Math.abs(R)>v&&a(R>0?1:-1)}},y=()=>{if(!o||!u)return;const P=o-u,C=P>v,$=P<-v;Math.abs(P)>v&&(C&&n(R=>(R+1)%w.length),$&&n(R=>(R-1+w.length)%w.length)),g()},x=()=>{a(-1),n(P=>(P-1+w.length)%w.length),g()},T=()=>{a(1),n(P=>(P+1)%w.length),g()},j=r[0],A=j?h[j.id]:null;if(e||!A||A.isLoading)return l.jsxs("div",{className:"relative min-h-[425px]",children:[l.jsxs("div",{className:"relative flex items-center justify-center gap-0 px-4 md:px-12 overflow-visible",children:[l.jsx("div",{className:"w-1/4 md:w-1/5 -mr-4 md:-mr-6",children:l.jsx("div",{className:"w-full h-[180px] sm:h-[220px] md:h-[280px] lg:h-[320px] bg-gray-100 animate-pulse rounded-lg"})}),l.jsxs("div",{className:"w-2/3 md:w-3/4",children:[l.jsx("div",{className:"w-full h-[180px] sm:h-[220px] md:h-[280px] lg:h-[320px] bg-gray-100 animate-pulse rounded-lg"}),l.jsxs("div",{className:"mt-2 space-y-1.5 p-1.5",children:[l.jsx("div",{className:"h-3 bg-gray-100 animate-pulse rounded w-3/4 mx-auto"}),l.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[l.jsx("div",{className:"h-2.5 bg-gray-100 animate-pulse rounded w-16"}),l.jsx("div",{className:"h-2.5 bg-gray-100 animate-pulse rounded w-2"}),l.jsx("div",{className:"h-2.5 bg-gray-100 animate-pulse rounded w-20"})]})]})]}),l.jsx("div",{className:"w-1/4 md:w-1/5 -ml-4 md:-ml-6",children:l.jsx("div",{className:"w-full h-[180px] sm:h-[220px] md:h-[280px] lg:h-[320px] bg-gray-100 animate-pulse rounded-lg"})})]}),l.jsx("div",{className:"mt-4 text-center",children:[1,2,3,4,5].map((P,C)=>l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-200 inline-block mx-1"},C))})]});if(t)return l.jsxs("div",{className:"text-center py-6",children:[l.jsx("p",{className:"text-red-600 mb-4",children:t}),l.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Try Again"})]});if(w.length===0)return l.jsx("div",{className:"text-center py-6",children:l.jsx("p",{className:"text-gray-500",children:"No news available for Main Campus"})});const J=P=>(s+P+w.length)%w.length;return l.jsx("div",{className:"w-full",children:l.jsxs("div",{className:"relative group",onTouchStart:b,onTouchMove:_,onTouchEnd:y,style:{touchAction:"pan-y pinch-zoom"},children:[l.jsx("button",{onClick:x,className:"absolute left-2 top-1/2 -translate-y-1/2 z-10 p-2 rounded-full bg-white/80 backdrop-blur-sm shadow-lg hidden md:block opacity-0 md:group-hover:opacity-100 transition-opacity duration-200 hover:bg-white","aria-label":"Previous slide",children:l.jsx(ln,{className:"w-6 h-6 text-gray-600"})}),l.jsx("button",{onClick:T,className:"absolute right-2 top-1/2 -translate-y-1/2 z-10 p-2 rounded-full bg-white/80 backdrop-blur-sm shadow-lg hidden md:block opacity-0 md:group-hover:opacity-100 transition-opacity duration-200 hover:bg-white","aria-label":"Next slide",children:l.jsx(cn,{className:"w-6 h-6 text-gray-600"})}),l.jsx("div",{className:"relative flex items-center justify-center gap-0 px-4 md:px-12 overflow-visible",children:l.jsxs(Rt,{mode:"popLayout",initial:!1,children:[l.jsx(N.div,{initial:{x:100,opacity:0,scale:.8,zIndex:1},animate:{x:0,opacity:.7,scale:1.5,zIndex:1,y:40,transition:{type:"spring",stiffness:200,damping:25,mass:.8,velocity:.5}},exit:{x:-100,opacity:0,scale:.8,transition:{type:"spring",stiffness:200,damping:25,mass:.8,velocity:.5}},className:"w-1/4 md:w-1/5 -mr-4 md:-mr-6",children:l.jsx(vt,{news:w[J(-1)],variant:"main",showTitle:!1})},`prev-${s}`),l.jsx(N.div,{initial:{x:i*100,opacity:0,scale:.9,zIndex:2},animate:{x:0,opacity:1,scale:1.4,zIndex:2,transition:{type:"spring",stiffness:200,damping:25,mass:.8,velocity:.5}},exit:{x:-i*100,opacity:0,scale:.9,transition:{type:"spring",stiffness:200,damping:25,mass:.8,velocity:.5}},className:"w-2/3 md:w-3/4",children:l.jsx(vt,{news:w[s],variant:"main",showTitle:!0})},`current-${s}`),l.jsx(N.div,{initial:{x:-100,opacity:0,scale:.8,zIndex:1},animate:{x:0,opacity:.7,scale:1.5,zIndex:1,y:40,transition:{type:"spring",stiffness:200,damping:25,mass:.8,velocity:.5}},exit:{x:100,opacity:0,scale:.8,transition:{type:"spring",stiffness:200,damping:25,mass:.8,velocity:.5}},className:"w-1/4 md:w-1/5 -ml-4 md:-ml-6",children:l.jsx(vt,{news:w[J(1)],variant:"main",showTitle:!1})},`next-${s}`)]})}),w.length>0&&l.jsx("div",{className:"mt-4 text-center",children:w.map((P,C)=>l.jsxs(N.button,{onClick:()=>{a(C>s?1:-1),n(C),g()},className:"relative inline-block mx-1",whileHover:{scale:1.2},whileTap:{scale:.9},children:[l.jsx(N.div,{className:`w-1.5 h-1.5 rounded-full ${C===s?"bg-blue-600":"bg-gray-300"}`,animate:{scale:C===s?[1,1.8,1.4]:1,opacity:C===s?1:.5},transition:{duration:.4,ease:"easeInOut",times:[0,.5,1]}}),C===s&&l.jsx(N.div,{className:"absolute inset-0 rounded-full bg-blue-600/20",layoutId:"activeDot",transition:{type:"spring",stiffness:500,damping:30}})]},C))})]})})}function _l({news:r,isImageLoaded:e=!1,index:t,onImageLoaded:s,canLoad:n}){const[i,a]=m.useState(!e),[o,c]=m.useState(!1),[u,d]=m.useState(!1),[h,f]=m.useState(0),[p,v]=m.useState(!1),w=m.useRef(null),g=m.useRef(null),b=m.useRef(null);m.useEffect(()=>{const j=()=>{v(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent))};return j(),window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[]),m.useEffect(()=>{n&&!o&&(c(!0),d(!0))},[n,o]),m.useEffect(()=>(g.current=new IntersectionObserver(j=>{j.forEach(A=>{A.isIntersecting&&n&&(c(!0),d(!0))})},{root:null,rootMargin:p?"300px 0px":"1500px 0px",threshold:p?.1:0}),w.current&&g.current.observe(w.current),()=>{g.current&&g.current.disconnect()}),[n,p]),m.useEffect(()=>{if(n&&!u){const j=setTimeout(()=>{u||(c(!0),d(!0))},p?100:500);return()=>clearTimeout(j)}},[n,u,p]);const _=()=>{console.log(`Image load failed for index ${t}, retry count: ${h}`),h<5&&(f(j=>j+1),a(!0),setTimeout(()=>{if(b.current&&r.image_url){const j=p?`?t=${Date.now()}`:"";b.current.src=`${r.image_url}${j}`}},p?100:300))},y=()=>{console.log(`Image loaded successfully for index ${t}`),a(!1),d(!0),s(t)},x=j=>new Date(j).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),T=()=>{r.source_url&&window.open(r.source_url,"_blank","noopener,noreferrer")};return l.jsx("div",{onClick:T,className:"block relative h-full cursor-pointer hover:opacity-90 transition-opacity",style:{touchAction:"pan-y pinch-zoom"},children:l.jsxs("div",{ref:w,className:"relative h-full overflow-hidden rounded-lg",children:[i&&l.jsx("div",{className:"h-full w-full bg-gray-100 animate-pulse"}),o&&l.jsx("img",{ref:b,src:r.image_url,alt:r.title,className:`h-[239%] w-full object-cover object-top ${i?"hidden":"block"}`,onLoad:y,onError:_,loading:p?"eager":"lazy",decoding:p?"async":"auto"}),l.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-white/90 backdrop-blur-sm mt-1 space-y-1 p-1 text-center",children:[l.jsx("h3",{className:"text-xs font-medium text-gray-900 line-clamp-2",children:r.title}),l.jsxs("div",{className:"flex items-center justify-center gap-1.5 text-[10px] text-gray-500",children:[l.jsx("span",{children:r.source_url?new URL(r.source_url).hostname.replace("www.",""):"GSU"}),l.jsx("span",{children:""}),l.jsx("span",{children:x(r.published_at)})]})]})]})})}function xl({news:r,loading:e,error:t}){const[s,n]=m.useState(new Set),[i,a]=m.useState(new Set),[o,c]=m.useState(0),[u,d]=m.useState(!1),[h,f]=m.useState(!1);m.useEffect(()=>{const b=()=>{f(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent))};return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]),m.useEffect(()=>{r&&r.filter(_=>_.image_url).map(_=>_.image_url).forEach(_=>{const y=new Image;y.src=h?`${_}?t=${Date.now()}`:_,y.onload=()=>{n(x=>new Set([...x,_]))}})},[r,h]),m.useEffect(()=>{const b=setTimeout(()=>{d(!0)},h?2e3:5e3);return()=>clearTimeout(b)},[h]);const p=b=>{a(_=>new Set([..._,b])),c(_=>_+1)},v=b=>b.image_url?s.has(b.image_url):!1,w=b=>u?!0:h?Math.abs(b-o)<=4||i.has(b-1)||b<6:Math.abs(b-o)<=3||i.has(b-1)||b<4;if(e)return l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(t)return l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-red-500",children:t})});if(!r||r.length===0)return l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-gray-500",children:"No news available for CST"})});const g=[...r].sort((b,_)=>new Date(_.published_at).getTime()-new Date(b.published_at).getTime()).slice(0,10);return l.jsx("div",{className:"px-4 py-8",children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map((b,_)=>l.jsx("div",{className:"aspect-[4/3]",children:l.jsx(_l,{news:b,isImageLoaded:v(b),index:_,onImageLoaded:p,canLoad:w(_)})},b.id))})})}function jl(){const[r,e]=m.useState([]),[t,s]=m.useState([]),[n,i]=m.useState(!0),[a,o]=m.useState(null);return m.useEffect(()=>{(async()=>{try{const{data:u,error:d}=await Sr();if(d)throw d;const h=u.filter(p=>{var v;return((v=p.campus)==null?void 0:v.name)==="Main Campus"}),f=u.filter(p=>{var v;return((v=p.campus)==null?void 0:v.name)==="CST"});e(h),s(f)}catch(u){o(u instanceof Error?u.message:"Failed to fetch news")}finally{i(!1)}})()},[]),l.jsxs("div",{className:"flex flex-col min-h-screen bg-white",children:[l.jsx("section",{className:"relative py-16 px-4",children:l.jsx("div",{className:"max-w-5xl mx-auto",children:l.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center",children:[l.jsx("h1",{className:"text-4xl md:text-5xl font-bold tracking-tight text-gray-900 mb-4",children:"What's News"}),l.jsx(N.p,{className:"text-gray-600 text-base md:text-lg max-w-2xl mx-auto leading-relaxed",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},children:"Stay informed with the latest updates, events, and announcements from across our campuses"})]})})}),l.jsx("section",{className:"flex-1 overflow-y-auto px-4 py-8",children:l.jsxs("div",{className:"max-w-6xl mx-auto space-y-12",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-base font-medium text-gray-700",children:"Main Campus News"}),l.jsx(ve,{to:"/news?campus=Main%20Campus",children:l.jsx($e,{className:"hover:bg-gray-50 transition-colors border-gray-300",children:l.jsx(Le,{className:"px-2 py-1",children:l.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 hover:text-gray-900",children:["Show all",l.jsx(Ht,{className:"w-3 h-3"})]})})})})]}),l.jsx(bl,{news:r,loading:n,error:a})]}),l.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-base font-medium text-gray-700",children:"College of Science and Technology (CST)"}),l.jsx(ve,{to:"/news?campus=CST",children:l.jsx($e,{className:"hover:bg-gray-50 transition-colors border-gray-300",children:l.jsx(Le,{className:"px-2 py-1",children:l.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 hover:text-gray-900",children:["Show all",l.jsx(Ht,{className:"w-3 h-3"})]})})})})]}),l.jsx(xl,{news:t,loading:n,error:a})]})]})})]})}function kl(){return m.useEffect(()=>{Zn()},[]),l.jsxs(fn,{children:[l.jsx(Qr,{children:l.jsxs(ie,{element:l.jsx(Qn,{}),children:[l.jsx(ie,{path:"/",element:l.jsx(jl,{})}),l.jsx(ie,{path:"/news",element:l.jsx(pl,{})}),l.jsx(ie,{path:"/about",element:l.jsx(yl,{})}),l.jsx(ie,{path:"/login",element:l.jsx(ao,{})}),l.jsx(ie,{path:"*",element:l.jsx(Zr,{to:"/",replace:!0})})]})}),l.jsx(Fn,{})]})}dn.createRoot(document.getElementById("root")).render(l.jsx(m.StrictMode,{children:l.jsx(en,{basename:"/gsu-connect",children:l.jsx(kl,{})})}));
